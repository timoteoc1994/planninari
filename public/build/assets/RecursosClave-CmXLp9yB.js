import{d as _,x as h,c as T,o as d,w as N,a as e,e as u,f as R,F as f,h as y,t as a,u as o,j as D,l as n,q as w,p as c}from"./app-dG6Nd7Y9.js";import{_ as $}from"./AppLayout-Da1CQfCP.js";import{S as m}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"py-8 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto space-y-12"},G={class:"overflow-x-auto rounded shadow bg-white"},O={class:"min-w-full table-auto"},H={class:"px-4 py-2"},L={class:"px-4 py-2"},J={class:"px-4 py-2"},K={class:"px-4 py-2"},Q={class:"px-4 py-2"},W={class:"px-4 py-2 flex flex-wrap gap-2"},X=["onClick"],Y=["onClick"],Z={class:"overflow-x-auto rounded shadow bg-white"},ee={class:"min-w-full table-auto"},se={class:"px-4 py-2"},te={class:"px-4 py-2"},oe={class:"px-4 py-2"},re={class:"px-4 py-2"},le={class:"px-4 py-2"},ie={class:"px-4 py-2"},ae={class:"px-4 py-2"},ne={class:"px-4 py-2 flex flex-wrap gap-2"},de=["onClick"],ue=["onClick"],ce={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},pe={class:"bg-white rounded-lg p-6 w-full max-w-md"},be={class:"text-lg font-semibold mb-4"},me={class:"grid grid-cols-2 gap-4"},xe={class:"flex justify-end space-x-2 mt-4"},fe=["disabled"],ye={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},ve={class:"bg-white rounded-lg p-6 w-full max-w-md"},ge={class:"text-lg font-semibold mb-4"},we={class:"grid grid-cols-2 gap-4"},_e={class:"flex justify-end space-x-2 mt-4"},ke=["disabled"],Ce={__name:"RecursosClave",props:{proyecto_id:Number,disponibles:Array,necesarios:Array},setup(k){const E=k,v=_(!1),g=_(!1),x=["Equipos y materiales","Humanos","Infraestructura","Intelectuales","Materiales e insumos","Tecnológicos","Otras"],C=["Malo","Regular","Bueno","Excelente"],B=["Alto","Mediano","Bajo"],l=h({recursos_clave_id:E.proyecto_id,tipo_recurso:x[0],descripcion:"",cantidad:"",estado:C[0],importancia:B[0],descripcion_importancia:""});let p=_(null);const r=h({recursos_clave_id:E.proyecto_id,tipo_recurso:x[0],descripcion:"",cantidad:"",aporte_objetivo:"",porcentaje:"",precio:"",puede_adquirir:!1});let b=_(null);function V(){p.value=null,l.reset(),l.tipo_recurso=x[0],l.estado=C[0],l.importancia=B[0],v.value=!0}function U(i){p.value=i.id,l.tipo_recurso=i.tipo_recurso,l.descripcion=i.descripcion,l.cantidad=i.cantidad,l.estado=i.estado,l.importancia=i.importancia,l.descripcion_importancia=i.descripcion_importancia,v.value=!0}function q(){const i=p.value?"put":"post",s=p.value?route("recursos.disponibles.update",p.value):route("recursos.disponibles.store");l[i](s,{onSuccess:()=>{v.value=!1,l.reset(),m.fire({icon:"success",title:p.value?"Recurso disponible actualizado":"Recurso disponible registrado",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})},onError:()=>{m.fire({icon:"error",title:"Error al guardar recurso disponible",showConfirmButton:!1,timer:2500,timerProgressBar:!0})}})}function S(i){confirm("¿Eliminar recurso disponible?")&&l.delete(route("recursos.disponibles.destroy",i))}function P(){b.value=null,r.reset(),r.tipo_recurso=x[0],r.puede_adquirir=!1,g.value=!0}function A(i){b.value=i.id,r.tipo_recurso=i.tipo_recurso,r.descripcion=i.descripcion,r.cantidad=i.cantidad,r.aporte_objetivo=i.aporte_objetivo,r.porcentaje=i.porcentaje,r.precio=i.precio,r.puede_adquirir=i.puede_adquirir===1||i.puede_adquirir===!0,g.value=!0}function I(){const i=b.value?"put":"post",s=b.value?route("recursos.necesarios.update",b.value):route("recursos.necesarios.store");r[i](s,{onSuccess:()=>{g.value=!1,r.reset(),m.fire({icon:"success",title:b.value?"Recurso necesario actualizado":"Recurso necesario registrado",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})},onError:()=>{m.fire({icon:"error",title:"Error al guardar recurso necesario",showConfirmButton:!1,timer:2500,timerProgressBar:!0})}})}async function M(i){(await m.fire({title:"¿Eliminar recurso necesario?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed&&r.delete(route("recursos.necesarios.destroy",i),{onSuccess:()=>{m.fire({icon:"success",title:"Recurso eliminado",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})},onError:()=>{m.fire({icon:"error",title:"Error al eliminar recurso",showConfirmButton:!1,timer:2500,timerProgressBar:!0})}})}return(i,s)=>(d(),T($,{title:"Etapa 4 – Recursos Clave"},{header:N(()=>s[15]||(s[15]=[e("h2",{class:"font-semibold text-xl text-gray-800"},"Recursos Clave",-1)])),default:N(()=>[e("div",z,[e("section",null,[e("div",{class:"flex flex-wrap justify-between items-center mb-4 gap-4"},[s[16]||(s[16]=e("h3",{class:"text-lg font-bold"},"Recursos Disponibles",-1)),e("button",{onClick:V,class:"px-4 py-2 bg-blue-600 text-white rounded"}," Nuevo Disponible ")]),e("div",G,[e("table",O,[s[17]||(s[17]=e("thead",{class:"bg-gray-100"},[e("tr",{class:"text-left text-sm"},[e("th",{class:"px-4 py-2"},"Tipo"),e("th",{class:"px-4 py-2"},"Descripción"),e("th",{class:"px-4 py-2"},"Cantidad"),e("th",{class:"px-4 py-2"},"Estado"),e("th",{class:"px-4 py-2"},"Importancia"),e("th",{class:"px-4 py-2"},"Acciones")])],-1)),e("tbody",null,[(d(!0),u(f,null,y(k.disponibles,t=>(d(),u("tr",{key:t.id,class:"border-b text-sm"},[e("td",H,a(t.tipo_recurso),1),e("td",L,a(t.descripcion),1),e("td",J,a(t.cantidad),1),e("td",K,a(t.estado),1),e("td",Q,a(t.importancia),1),e("td",W,[e("button",{onClick:j=>U(t),class:"text-blue-600 hover:underline"},"Editar",8,X),e("button",{onClick:j=>S(t.id),class:"text-red-600 hover:underline"},"Eliminar",8,Y)])]))),128))])])])]),e("section",null,[e("div",{class:"flex flex-wrap justify-between items-center mb-4 gap-4"},[s[18]||(s[18]=e("h3",{class:"text-lg font-bold"},"Recursos Necesarios",-1)),e("button",{onClick:P,class:"px-4 py-2 bg-blue-600 text-white rounded"}," Nuevo Necesario ")]),e("div",Z,[e("table",ee,[s[19]||(s[19]=e("thead",{class:"bg-gray-100 text-sm"},[e("tr",{class:"text-left"},[e("th",{class:"px-4 py-2"},"Tipo"),e("th",{class:"px-4 py-2"},"Descripción"),e("th",{class:"px-4 py-2"},"Cantidad"),e("th",{class:"px-4 py-2"},"Aporte"),e("th",{class:"px-4 py-2"},"%"),e("th",{class:"px-4 py-2"},"Precio"),e("th",{class:"px-4 py-2"},"Puede Adquirir"),e("th",{class:"px-4 py-2"},"Acciones")])],-1)),e("tbody",null,[(d(!0),u(f,null,y(k.necesarios,t=>(d(),u("tr",{key:t.id,class:"border-b text-sm"},[e("td",se,a(t.tipo_recurso),1),e("td",te,a(t.descripcion),1),e("td",oe,a(t.cantidad),1),e("td",re,a(t.aporte_objetivo),1),e("td",le,a(t.porcentaje)+"%",1),e("td",ie,a(t.precio),1),e("td",ae,a(t.puede_adquirir?"Sí":"No"),1),e("td",ne,[e("button",{onClick:j=>A(t),class:"text-blue-600 hover:underline"},"Editar",8,de),e("button",{onClick:j=>M(t.id),class:"text-red-600 hover:underline"},"Eliminar",8,ue)])]))),128))])])])]),v.value?(d(),u("div",ce,[e("div",pe,[e("h4",be,a(o(p)?"Editar":"Nuevo")+" Recurso Disponible",1),e("form",{onSubmit:D(q,["prevent"]),class:"space-y-3"},[e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm"},"Tipo de Recurso",-1)),n(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>o(l).tipo_recurso=t),class:"mt-1 w-full border-gray-300 rounded"},[(d(),u(f,null,y(x,t=>e("option",{key:t},a(t),1)),64))],512),[[w,o(l).tipo_recurso]])]),e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm"},"Descripción",-1)),n(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>o(l).descripcion=t),class:"mt-1 w-full border-gray-300 rounded"},null,512),[[c,o(l).descripcion]])]),e("div",me,[e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm"},"Cantidad",-1)),n(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=t=>o(l).cantidad=t),class:"mt-1 w-full border-gray-300 rounded"},null,512),[[c,o(l).cantidad]])]),e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm"},"Estado",-1)),n(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>o(l).estado=t),class:"mt-1 w-full border-gray-300 rounded"},[(d(),u(f,null,y(C,t=>e("option",{key:t},a(t),1)),64))],512),[[w,o(l).estado]])])]),e("div",null,[s[24]||(s[24]=e("label",{class:"block text-sm"},"Importancia",-1)),n(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>o(l).importancia=t),class:"mt-1 w-full border-gray-300 rounded"},[(d(),u(f,null,y(B,t=>e("option",{key:t},a(t),1)),64))],512),[[w,o(l).importancia]])]),e("div",null,[s[25]||(s[25]=e("label",{class:"block text-sm"},"Detalle Importancia",-1)),n(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=t=>o(l).descripcion_importancia=t),rows:"2",class:"mt-1 w-full border-gray-300 rounded"},null,512),[[c,o(l).descripcion_importancia]])]),e("div",xe,[e("button",{onClick:s[6]||(s[6]=t=>v.value=!1),type:"button",class:"px-4 py-2"},"Cancelar"),e("button",{type:"submit",class:"px-4 py-2 bg-green-600 text-white rounded",disabled:o(l).processing},"Guardar",8,fe)])],32)])])):R("",!0),g.value?(d(),u("div",ye,[e("div",ve,[e("h4",ge,a(o(b)?"Editar":"Nuevo")+" Recurso Necesario",1),e("form",{onSubmit:D(I,["prevent"]),class:"space-y-3"},[e("div",null,[s[26]||(s[26]=e("label",{class:"block text-sm"},"Tipo de Recurso",-1)),n(e("select",{"onUpdate:modelValue":s[7]||(s[7]=t=>o(r).tipo_recurso=t),class:"mt-1 w-full border-gray-300 rounded"},[(d(),u(f,null,y(x,t=>e("option",{key:t},a(t),1)),64))],512),[[w,o(r).tipo_recurso]])]),e("div",null,[s[27]||(s[27]=e("label",{class:"block text-sm"},"Descripción",-1)),n(e("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=t=>o(r).descripcion=t),class:"mt-1 w-full border-gray-300 rounded"},null,512),[[c,o(r).descripcion]])]),e("div",we,[e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm"},"Cantidad",-1)),n(e("input",{type:"number","onUpdate:modelValue":s[9]||(s[9]=t=>o(r).cantidad=t),class:"mt-1 w-full border-gray-300 rounded"},null,512),[[c,o(r).cantidad]])]),e("div",null,[s[29]||(s[29]=e("label",{class:"block text-sm"},"%",-1)),n(e("input",{type:"number",step:"0.01","onUpdate:modelValue":s[10]||(s[10]=t=>o(r).porcentaje=t),class:"mt-1 w-full border-gray-300 rounded"},null,512),[[c,o(r).porcentaje]])])]),e("div",null,[s[30]||(s[30]=e("label",{class:"block text-sm"},"Aporte Objetivo",-1)),n(e("textarea",{"onUpdate:modelValue":s[11]||(s[11]=t=>o(r).aporte_objetivo=t),rows:"2",class:"mt-1 w-full border-gray-300 rounded"},null,512),[[c,o(r).aporte_objetivo]])]),e("div",null,[s[31]||(s[31]=e("label",{class:"block text-sm"},"Precio",-1)),n(e("input",{type:"number",step:"0.01","onUpdate:modelValue":s[12]||(s[12]=t=>o(r).precio=t),class:"mt-1 w-full border-gray-300 rounded"},null,512),[[c,o(r).precio]])]),e("div",null,[s[33]||(s[33]=e("label",{class:"block text-sm"},"Puede Adquirir",-1)),n(e("select",{"onUpdate:modelValue":s[13]||(s[13]=t=>o(r).puede_adquirir=t),class:"mt-1 w-full border-gray-300 rounded"},s[32]||(s[32]=[e("option",{value:!1},"No",-1),e("option",{value:!0},"Sí",-1)]),512),[[w,o(r).puede_adquirir]])]),e("div",_e,[e("button",{onClick:s[14]||(s[14]=t=>g.value=!1),type:"button",class:"px-4 py-2"},"Cancelar"),e("button",{type:"submit",class:"px-4 py-2 bg-green-600 text-white rounded",disabled:o(r).processing},"Guardar",8,ke)])],32)])])):R("",!0)])]),_:1}))}},Ne=F(Ce,[["__scopeId","data-v-e53f512d"]]);export{Ne as default};
