import{k as y,d as w,x as E,c as V,o as d,w as f,a as e,j as S,e as m,f as x,u as i,t as c,g as b}from"./app-CMmN75Yt.js";import{s as v}from"./index-sFwGSaal.js";import{S as l}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{_ as C}from"./AppLayout-CYw2QiOb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"font-semibold text-xl text-gray-800 leading-tight"},k={class:"py-12"},B={class:"max-w-4xl mx-auto sm:px-6 lg:px-8 bg-white p-8 rounded shadow"},j={class:"w-full h-52 bg-gray-200 flex flex-col justify-center items-center rounded mb-4"},A=["disabled"],N={key:0,class:"mt-2 text-sm text-red-600"},G={key:1,class:"mt-4 w-full flex flex-col items-center"},T=["src"],D={class:"mt-2 text-sm text-green-600"},O={key:2,class:"mt-2 text-sm text-green-600"},R={key:3,class:"mt-4 text-sm text-gray-600 flex flex-col items-center"},U=["href"],q=["disabled"],z=["disabled"],H={__name:"Etapa9",props:{etapa9:Object,proyecto_id:Number},setup(p){const n=p,r=y(()=>!!(n.etapa9&&n.etapa9.id)),s=w(null),o=E({proyecto_id:n.proyecto_id,video:null,delete_video:!1});function g(){l.fire({title:"¿Eliminar video?",text:"Esto removerá el video actual del pitch.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&o.delete(v("etapa9.destroyVideo",n.etapa9.id),{preserveScroll:!0,onSuccess:()=>{l.fire("Eliminado","Video borrado correctamente.","success"),s.value=null,o.video=null},onError:t=>{console.error(t),l.fire("Error","No se pudo eliminar el video.","error")}})})}function _(){if(!r.value&&!o.video){l.fire("Campo requerido","Debes seleccionar un video.","warning");return}const a=r.value?v("etapa9.update",n.etapa9.id):v("etapa9.store"),t={data:r.value?{_method:"PUT",delete_video:o.delete_video}:{},forceFormData:!0,preserveScroll:!0,onSuccess:()=>{l.fire({icon:"success",title:r.value?"Actualizado":"Guardado",text:r.value?"Video actualizado correctamente.":"Video guardado correctamente.",timer:2e3,showConfirmButton:!1})},onError:u=>{console.error(u),l.fire("Error",Object.values(u).join("<br>"),"error")}};o.post(a,t)}function h(a){const t=a.target.files[0];if(!t){o.video=null,s.value=null;return}if(!["video/mp4","video/avi","video/mpeg"].includes(t.type)){l.fire("Tipo no válido","Solo MP4, AVI y MPEG.","warning"),a.target.value="",o.video=null,s.value=null;return}o.video=t,s.value=URL.createObjectURL(t)}return(a,t)=>(d(),V(C,{title:"Etapa 9"},{header:f(()=>[e("h2",P," Etapa 9 – "+c(r.value?"Editar":"Subir")+" Pitch de Presentación ",1)]),default:f(()=>[e("div",k,[e("div",B,[e("form",{onSubmit:S(_,["prevent"]),enctype:"multipart/form-data"},[e("div",j,[t[2]||(t[2]=e("p",{class:"text-lg font-semibold"},"AGREGAR VIDEO",-1)),e("input",{type:"file",name:"video",accept:"video/mp4,video/avi,video/mpeg",onChange:h,disabled:i(o).processing,class:"mt-2"},null,40,A),i(o).errors.video?(d(),m("p",N,c(i(o).errors.video),1)):s.value?(d(),m("div",G,[e("video",{src:s.value,controls:"",class:"max-h-40 rounded"},null,8,T),e("p",D," Vista previa: "+c(i(o).video.name),1)])):i(o).video?(d(),m("p",O," Archivo seleccionado: "+c(i(o).video.name),1)):x("",!0),r.value&&p.etapa9.video_pitch_path?(d(),m("div",R,[t[1]||(t[1]=e("p",null,"Video actual:",-1)),e("a",{href:`/storage/${p.etapa9.video_pitch_path}`,class:"underline text-blue-600",target:"_blank"}," Ver video ",8,U),e("button",{type:"button",onClick:t[0]||(t[0]=u=>g()),class:"mt-2 text-red-600 hover:underline",disabled:i(o).processing}," Eliminar video ",8,q)])):x("",!0)]),t[3]||(t[3]=e("p",{class:"text-sm text-gray-700 mb-4"},[b(" Para el Pitch de Negocio deberá presentar un video que responda a:"),e("br"),b(" ¿Por qué su emprendimiento debería ser beneficiario del Fondo de Capital Semilla? ")],-1)),t[4]||(t[4]=e("ul",{class:"text-sm text-gray-700 list-disc list-inside mb-6"},[e("li",null,"Problema–Solución del emprendimiento"),e("li",null,"Valor agregado"),e("li",null,"Conocimiento sobre el emprendimiento"),e("li",null,"Experiencia como emprendedor(a)"),e("li",null,"Principales lecciones aprendidas en el desarrollo")],-1)),e("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",disabled:i(o).processing},c(i(o).processing?"Procesando...":r.value?"Actualizar":"Guardar"),9,z)],32)])])]),_:1}))}};export{H as default};
