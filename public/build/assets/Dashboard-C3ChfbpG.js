import{d as c,c as D,o as n,w as x,a as e,e as a,f as w,F as S,h as N,t as f,b as V,u as M,S as q,g as B,j as p,l as b,p as m,Q as v}from"./app-CMmN75Yt.js";import{_ as F}from"./AppLayout-CYw2QiOb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"flex justify-between items-center"},$={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},A={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-8"},I={key:0,class:"text-center py-8"},L={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Q={class:"justify-between items-start mb-4"},T={class:"text-lg font-semibold text-gray-800 truncate"},G={class:"flex"},H=["onClick"],J=["onClick"],K={class:"text-gray-600 text-sm mb-4 line-clamp-3"},O={class:"text-xs text-gray-500"},R={class:"mt-3"},W={class:"mb-4"},X={class:"mb-6"},Y={class:"mt-3"},Z={class:"mb-4"},ee={class:"mb-6"},le={__name:"Dashboard",props:{projects:Array},setup(h){const y=h,i=c(!1),d=c(!1),u=c(null),l=c({name:"",description:""}),g=()=>{l.value={name:"",description:""}},k=()=>{v.post(route("projects.store"),l.value,{onSuccess:()=>{i.value=!1,g()},onError:s=>{console.error("Error creating project:",s)}})},C=s=>{u.value=s,l.value={name:s.name,description:s.description},d.value=!0},E=()=>{v.post(route("projects.update",u.value.id),l.value,{onSuccess:()=>{d.value=!1,u.value=null,g()},onError:s=>{console.error("Error updating project:",s)}})},j=s=>{confirm("¿Estás seguro de que quieres eliminar este proyecto?")&&v.delete(route("projects.destroy",s),{onError:t=>{console.error("Error deleting project:",t)}})},r=()=>{i.value=!1,d.value=!1,u.value=null,g()},P=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"});return(s,t)=>(n(),D(F,{title:"Planes"},{header:x(()=>[e("div",U,[t[7]||(t[7]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Planes ",-1)),e("button",{onClick:t[0]||(t[0]=o=>i.value=!0),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Nuevo Plan ")])]),default:x(()=>[e("div",$,[e("div",z,[e("div",A,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-6"},"Mis Planes",-1)),y.projects.length===0?(n(),a("div",I,t[8]||(t[8]=[e("p",{class:"text-gray-600"},"No tienes planes aún. ¡Crea tu primer plan!",-1)]))):(n(),a("div",L,[(n(!0),a(S,null,N(y.projects,o=>(n(),a("div",{key:o.id,class:"bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6"},[e("div",Q,[e("h3",T,f(o.name),1),e("div",G,[e("button",{onClick:_=>C(o),class:"text-blue-600 hover:text-blue-800 text-sm bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded",title:"Editar"}," ✏️ Editar ",8,H),e("button",{onClick:_=>j(o.id),class:"text-red-600 hover:text-red-800 text-sm bg-red-50 hover:bg-red-100 px-2 py-1 rounded",title:"Eliminar"}," 🗑️ Eliminar ",8,J),V(M(q),{href:s.route("projects.stages.show",o.id),class:"text-blue-600 hover:text-blue-800 text-sm bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded"},{default:x(()=>t[9]||(t[9]=[B(" Detalles ")])),_:2,__:[9]},1032,["href"])])]),e("p",K,f(o.description||"Sin descripción"),1),e("div",O," Creado: "+f(P(o.created_at)),1)]))),128))]))])])]),i.value?(n(),a("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:r},[e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",onClick:t[3]||(t[3]=p(()=>{},["stop"]))},[e("div",R,[e("div",{class:"flex justify-between items-center mb-4"},[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900"},"Crear Nuevo Plan",-1)),e("button",{onClick:r,class:"text-gray-400 hover:text-gray-600 text-xl"}," ✕ ")]),e("form",{onSubmit:p(k,["prevent"])},[e("div",W,[t[12]||(t[12]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"}," Nombre del Plan ",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.name=o),type:"text",required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Ingresa el nombre del plan"},null,512),[[m,l.value.name]])]),e("div",X,[t[13]||(t[13]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"}," Descripción ",-1)),b(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.description=o),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",rows:"3",placeholder:"Describe tu plan"},null,512),[[m,l.value.description]])]),e("div",{class:"flex items-center justify-between"},[e("button",{type:"button",onClick:r,class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"}," Cancelar "),t[14]||(t[14]=e("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"}," Crear Plan ",-1))])],32)])])])):w("",!0),d.value?(n(),a("div",{key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:r},[e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",onClick:t[6]||(t[6]=p(()=>{},["stop"]))},[e("div",Y,[e("div",{class:"flex justify-between items-center mb-4"},[t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900"},"Editar Plan",-1)),e("button",{onClick:r,class:"text-gray-400 hover:text-gray-600 text-xl"}," ✕ ")]),e("form",{onSubmit:p(E,["prevent"])},[e("div",Z,[t[16]||(t[16]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"}," Nombre del Plan ",-1)),b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.name=o),type:"text",required:"",class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Ingresa el nombre del plan"},null,512),[[m,l.value.name]])]),e("div",ee,[t[17]||(t[17]=e("label",{class:"block text-gray-700 text-sm font-bold mb-2"}," Descripción ",-1)),b(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.description=o),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",rows:"3",placeholder:"Describe tu plan"},null,512),[[m,l.value.description]])]),e("div",{class:"flex items-center justify-between"},[e("button",{type:"button",onClick:r,class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"}," Cancelar "),t[18]||(t[18]=e("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"}," Actualizar Plan ",-1))])],32)])])])):w("",!0)]),_:1}))}};export{le as default};
